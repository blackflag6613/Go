services:
  go_app:
    image: golang:bullseye
    container_name: go_app_build_${BUILD_NUMBER}
    working_dir: /opt/app
    volumes:
      - /var/jenkins_home:/opt/app
    ports:
      - 9090:9090
    command: /bin/bash -c "sleep infinity && CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build main.go && ./main"
